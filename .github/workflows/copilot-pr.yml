name: Add Copilot Reviewer
on:
  pull_request:
    types: [opened, reopened, ready_for_review]
permissions:
  pull-requests: write
jobs:
  add-copilot:
    runs-on: ubuntu-latest
    steps:
      - name: Add Copilot as reviewer
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          PR_NUMBER: ${{ github.event.pull_request.number }}
          REPO: ${{ github.repository }}
        run: |
          echo '{"reviewers":["github-copilot"]}' > body.json
          gh api \
            repos/$REPO/pulls/$PR_NUMBER/requested_reviewers \
            --method POST \
            --input body.json
